<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Report - udin</title>
    
    <!-- Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#4F46E5', // Indigo 600
                        secondary: '#10B981', // Emerald 500
                        danger: '#EF4444', // Red 500
                        dark: '#1E293B', // Slate 800
                    }
                }
            }
        }
    </script>
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F1F5F9; }
        .card { background: white; border-radius: 12px; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
        @media print {
            .no-print { display: none; }
            body { background-color: white; }
            .card { box-shadow: none; border: 1px solid #e2e8f0; }
        }
    </style>
</head>
<body class="text-slate-800 antialiased"> 
    <!-- Top Navigation / Header -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <!-- Logo / Title -->
                    <div class="flex-shrink-0 flex items-center gap-3">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center text-white font-bold">
                            F
                        </div>
                        <h1 class="text-xl font-bold tracking-tight text-slate-900">Finance<span class="text-primary">Manager</span></h1>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <span class="border-primary text-slate-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Monthly Report
                        </span>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <span id="period-badge" class="px-3 py-1 rounded-full text-xs font-semibold bg-indigo-50 text-indigo-700 border border-indigo-100">
                        Loading...
                    </span>
                    <button onclick="window.print()" class="no-print inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all">
                        Print / Save PDF
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Header Text -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold leading-7 text-slate-900 sm:text-3xl sm:truncate">
                Financial Overview
            </h2>
            <p class="mt-1 text-sm text-slate-500">
                Detailed breakdown of income, expenses, and savings performance for <span id="period-text" class="font-medium">...</span>.
            </p>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 gap-5 sm:grid-cols-3 mb-8">
            <!-- Income Card -->
            <div class="card p-6 border-l-4 border-emerald-500">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-emerald-100 rounded-md p-3">
                        <svg class="h-6 w-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                        </svg>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-slate-500 truncate">Total Income</dt>
                            <dd class="flex items-baseline">
                                <div id="summary-income" class="text-2xl font-semibold text-slate-900">...</div>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- Expense Card -->
            <div class="card p-6 border-l-4 border-red-500">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-red-100 rounded-md p-3">
                        <svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" />
                        </svg>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-slate-500 truncate">Total Expense</dt>
                            <dd class="flex items-baseline">
                                <div id="summary-expense" class="text-2xl font-semibold text-slate-900">...</div>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- Savings Card -->
            <div class="card p-6 border-l-4 border-indigo-500">
                <div class="flex items-center">
                    <div class="flex-shrink-0 bg-indigo-100 rounded-md p-3">
                        <svg class="h-6 w-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-slate-500 truncate">Total Savings</dt>
                            <dd class="flex items-baseline">
                                <div id="summary-savings" class="text-2xl font-semibold text-slate-900">...</div>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chart: Daily Trend -->
        <div class="card p-6 mb-8">
            <h3 class="text-lg leading-6 font-medium text-slate-900 mb-4">Daily Spending Trend</h3>
            <div class="relative h-80 w-full">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- Bottom Grid: Allocation & Top Categories -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Allocation Chart -->
            <div class="card p-6">
                <h3 class="text-lg leading-6 font-medium text-slate-900 mb-4">Budget Allocation (50/30/20 Rule)</h3>
                <div class="relative h-64 w-full flex justify-center">
                    <canvas id="allocationChart"></canvas>
                </div>
                <div class="mt-4 grid grid-cols-3 text-center divide-x divide-slate-200">
                    <div>
                        <p class="text-xs text-slate-500 uppercase">Needs</p>
                        <p id="alloc-needs" class="text-sm font-bold text-slate-800">...</p>
                    </div>
                    <div>
                        <p class="text-xs text-slate-500 uppercase">Wants</p>
                        <p id="alloc-wants" class="text-sm font-bold text-slate-800">...</p>
                    </div>
                    <div>
                        <p class="text-xs text-slate-500 uppercase">Savings</p>
                        <p id="alloc-savings" class="text-sm font-bold text-slate-800">...</p>
                    </div>
                </div>
            </div>

            <!-- Top Categories Chart -->
            <div class="card p-6">
                <h3 class="text-lg leading-6 font-medium text-slate-900 mb-4">Top Spending Categories</h3>
                <div class="relative h-72 w-full">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>

        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8">
            <div class="mt-8 md:mt-0 md:order-1">
                <p class="text-center text-sm text-slate-400">
                    &copy; 2025 Finance Manager App (Group 5). Generated automatically.
                </p>
            </div>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
       //aku muak concat di c wkwkwkwkwkwkw
       const allocation_array = ['Wants'];
       const allocation_amount = [1000000.00];

       let allocation_data = {};

       if (allocation_array.length == allocation_amount.length) {
           allocation_array.forEach((element, i) => {
               allocation_data[element] = allocation_amount[i];
           });
       }
        // --- 1. DATA INJECTION ---
        // Ini data JSON yang lu kasih. Nanti bisa digenerate dari C.
        const reportData = {
            period: "December 2025",
            summary: {
                income: 3090000.00,
                expense: 1000000.00,
                savings: 2090000.00
            },
            dailyTrend: {
                labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"],
                data: [0.00,0.00,0.00,0.00,1000000.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
                data_income: [0.00,0.00,0.00,0.00,3090000.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00]
            },
            allocation: allocation_data,
            topCategories: {
                labels: ['Online Shopping'],
                data: [1000000.00]
            }
        };

        // --- 2. HELPER FUNCTIONS ---
        // Format angka jadi mata uang
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 2
            }).format(value);
        };

        // --- 3. DOM POPULATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Fill Text Data
            document.getElementById('period-badge').textContent = reportData.period;
            document.getElementById('period-text').textContent = reportData.period;
            
            document.getElementById('summary-income').textContent = formatCurrency(reportData.summary.income);
            document.getElementById('summary-expense').textContent = formatCurrency(reportData.summary.expense);
            document.getElementById('summary-savings').textContent = formatCurrency(reportData.summary.savings);

            document.getElementById('alloc-needs').textContent = formatCurrency(reportData.allocation.Needs);
            document.getElementById('alloc-wants').textContent = formatCurrency(reportData.allocation.Wants);
            document.getElementById('alloc-savings').textContent = formatCurrency(reportData.allocation.Savings);

            // --- 4. CHARTS CONFIG ---
            
            // A. Trend Chart (Line)
            const ctxTrend = document.getElementById('trendChart').getContext('2d');
            new Chart(ctxTrend, {
                type: 'line',
                data: {
                    labels: reportData.dailyTrend.labels,
                    datasets: [{
                        label: 'Daily Expenses',
                        data: reportData.dailyTrend.data,
                        borderColor: '#4F46E5', // Indigo
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4, // Smooth curve
                        pointRadius: 3,
                        pointHoverRadius: 6
                    },
{
           label: 'Daily Income',
           data: reportData.dailyTrend.data_income,
           borderColor: '#4FE54E',
           backgroundColor: 'rgba(79, 229, 70, 0.1)',
           borderWidth: 2,
           fill: true,
           tension: 0.4, // Smooth curve
           pointRadius: 3,
           pointHoverRadius: 6
       } 
]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { borderDash: [2, 4] }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // B. Allocation Chart (Doughnut)
            const ctxAlloc = document.getElementById('allocationChart').getContext('2d');
            new Chart(ctxAlloc, {
                type: 'doughnut',
                data: {
                    labels: ['Needs', 'Wants', 'Savings'],
                    datasets: [{
                        data: [
                            reportData.allocation.Needs,
                            reportData.allocation.Wants,
                            reportData.allocation.Savings
                        ],
                        backgroundColor: [
                            '#3B82F6', // Blue
                            '#F59E0B', // Amber
                            '#10B981'  // Emerald
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });

            // C. Top Categories (Horizontal Bar)
            const ctxCat = document.getElementById('categoryChart').getContext('2d');
            new Chart(ctxCat, {
                type: 'bar',
                data: {
                    labels: reportData.topCategories.labels,
                    datasets: [{
                        label: 'Amount',
                        data: reportData.topCategories.data,
                        backgroundColor: '#6366F1', // Indigo 500
                        borderRadius: 4,
                        barThickness: 20
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal Bar
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            grid: { borderDash: [2, 4] }
                        },
                        y: {
                            grid: { display: false }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>